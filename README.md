# Node.js ê°œë… ì •ë¦¬

### ë™ì‹œì„±(Blocking)ê³¼ ë¹„ë™ê¸°(Non-Blocking)
| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| **Blocking(ë™ê¸°)** | ëŒ€ì¤‘ ëª©ìš•íƒ•ì²˜ëŸ¼ ì•ì‚¬ëŒì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ìŒ ì‚¬ëŒì´ ëŒ€ê¸° |
| **Non-Blocking(ë¹„ë™ê¸°)** | ê°ì ìê¸° ì§‘ì—ì„œ ë”°ë¡œ ìƒ¤ì›Œ, ì„œë¡œ ê¸°ë‹¤ë¦¬ì§€ ì•ŠìŒ |

- **ë…¼ë¸”ë¡œí‚¹**: ì´ì „ ì‘ì—… ì™„ë£Œ ëŒ€ê¸° ì—†ì´ ë°”ë¡œ ë‹¤ìŒ ì‘ì—… ìˆ˜í–‰
- **ë¸”ë¡œí‚¹**: ì´ì „ ì‘ì—…ì´ ëë‚˜ì•¼ ë‹¤ìŒ ì‘ì—… ìˆ˜í–‰ ê°€ëŠ¥

### ìë°” ìŠ¤í¬ë¦½íŠ¸ ëŸ°íƒ€ì„
- ë…¸ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ëŸ°íƒ€ì„ì´ë‹¤
- ëŸ°íƒ€ì„ì€ íŠ¹ì • ì–¸ì–´ë¡œ ë§Œë“  í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ëœ»í•œë‹¤.;
- ë…¸ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ê¸°ë¼ê³  ë´ë„ ë¬´ë°©í•˜ë‹¤.

### ì´ë²¤íŠ¸ ê¸°ë°˜
- ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ë¯¸ë¦¬ ì§€ì •í•´ë‘” ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•œë‹¤.
- ì´ë²¤íŠ¸ë¡œëŠ” í´ë¦­ì´ë‚˜ ë„¤íŠ¸ì›Œí¬  ìš”ì²­ ë“±ì´ ìˆì„ ìˆ˜ ìˆë‹¤.
- ì´ë²¤íŠ¸ ê¸°ë°˜ ì‹œìŠ¤í…œì—ì„œëŠ” íŠ¹ì • ì´ë²ˆíŠ¸ê°€ ë°œìƒí•  ë–„ ë¬´ì—‡ì„ í• ì§€ ë¯¸ë¦¬ ë“±ë¡ í•´ë‘¬ì•¼ í•œë‹¤. ì´ë¥¼ **ì´ë²¤íŠ¸ ë¦¬ìŠ¤í„°**ì— **ì½œë°±**í•¨ìˆ˜ë¥¼ ë“±ë¡í•œë‹¤ê³  í‘œí˜„í•œë‹¤.
ex) í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ê²½ê³ ì°½ì„ ë„ìš°ëŠ” ê³¨ë°± í•¨ìˆ˜ë¥¼ ë“±ë¡í•´ë‘ë©´ í´ë¦­ ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë¼ ê²½ê³  ì°½ì´ ëœ¬ë‹¤.
  
#### ì´ë²¤íŠ¸ ë£¨í”„
- ì´ë²¤íŠ¸ê°€ ë™ì‹œì— ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ ìˆœì„œë¡œ ì½œë°± í•¨ìˆ˜ë¥¼ í˜¸ì¶œí• ì§€ë¥¼ ì´ë²¤íŠ¸ ë£¨í”„ê°€ íŒë‹¨í•œë‹¤. 
- ë…¸ë“œëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì˜ ë§¨ ìœ„ë¶€í„° í•œ ì¤„ì”© ì‹¤í–‰í•œë‹¤. 
- í•¨ìˆ˜ë¥¼ í˜¸ì¶œ ë¶€ë¶„ì„ ë°œê²¬í–ˆë‹¤ë©´ í˜¸ì¶œí•œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ ìŠ¤íƒì— ë„£ëŠ”ë‹¤.

---

### ìŠ¤ë ˆë“œì™€ í”„ë¡œì„¸ìŠ¤

### ì‹±ê¸€ ìŠ¤ë ˆë“œ
- ë…¸ë“œëŠ” í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œë¡œ ìš”ì²­ ì²˜ë¦¬
- ìš”ì²­ â†’ ì²˜ë¦¬ â†’ ì‘ë‹µê¹Œì§€ í•œ ìŠ¤ë ˆë“œê°€ ë‹´ë‹¹
- ë™ì‹œ ì²˜ë¦¬ëŠ” **ë¹„ë™ê¸° + ì´ë²¤íŠ¸ ë£¨í”„**ë¡œ í•´ê²°

### ë©€í‹° ìŠ¤ë ˆë“œ
- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì—¬ëŸ¬ ìŠ¤ë ˆë“œ ì‚¬ìš©
- CPU ì—°ì‚°ì´ ë§ì€ ê²½ìš° ìœ ë¦¬
- ìŠ¤ë ˆë“œ ë™ê¸°í™” ì´ìŠˆë¡œ ì½”ë”© ë‚œì´ë„ ìƒìŠ¹

### ë©€í‹° í”„ë¡œì„¸ì‹±
- ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ ì—¬ëŸ¬ ê°œ ì‚¬ìš©
- ê° í”„ë¡œì„¸ìŠ¤ëŠ” ë©”ëª¨ë¦¬ ê³µìœ  X
- ì…ì¶œë ¥ ìš”ì²­ ë§ì„ ë•Œ ìœ ë¦¬
- ë™ê¸°í™” ì´ìŠˆ ì ì–´ ìƒëŒ€ì ìœ¼ë¡œ êµ¬í˜„ ì‰¬ì›€

| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| **í”„ë¡œì„¸ìŠ¤** | ìš´ì˜ì²´ì œ ì‘ì—… ë‹¨ìœ„. ë©”ëª¨ë¦¬ ê³µìœ  X |
| **ìŠ¤ë ˆë“œ** | í”„ë¡œì„¸ìŠ¤ ë‚´ ì‹¤í–‰ íë¦„ ë‹¨ìœ„. ë©”ëª¨ë¦¬ ê³µìœ  O |

---

## 3. ì„œë²„ë¡œì„œì˜ Node.js
| ì¥ì  | ì„¤ëª… |
|---|---|
| ë¹ ë¥¸ ì‘ë‹µ | ì‹¤ì‹œê°„ ì±„íŒ…, ì•Œë¦¼ ì„œë¹„ìŠ¤ ì í•© |
| ë¹„ë™ê¸° ì²˜ë¦¬ | DB ì¡°íšŒ, íŒŒì¼ ì½ê¸° ë“±ì— ê°•í•¨ |

| ë‹¨ì  | ì„¤ëª… |
|---|---|
| CPU ì—°ì‚° ë§ì„ ë•Œ | ì´ë¯¸ì§€ ë³€í™˜, ëŒ€ìš©ëŸ‰ ë°ì´í„° ê°€ê³µ ë“± ë¹„íš¨ìœ¨ì  |

---

## ë³€ìˆ˜ ì„ ì–¸

| í‚¤ì›Œë“œ | íŠ¹ì§• | ì„¤ëª… |
|---|---|---|
| var | í•¨ìˆ˜ ìŠ¤ì½”í”„ | ì¬ì„ ì–¸ ê°€ëŠ¥ / í˜¸ì´ìŠ¤íŒ… ë¬¸ì œ / ì§€ì–‘ |
| let | ë¸”ë¡ ìŠ¤ì½”í”„ | ì¬í• ë‹¹ ê°€ëŠ¥ |
| const | ë¸”ë¡ ìŠ¤ì½”í”„ | ì¬í• ë‹¹ ë¶ˆê°€ / ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš© |

```javascript
var string1 = num1 + ' ë”í•˜ê¸° ' + num2 + 'ëŠ” \'' + result + '\'';
const string2 = `${num3} ë”í•˜ê¸° ${num4}ëŠ” '${result2}'`;
```
---
### í•¨ìˆ˜ í˜¸ì´ìŠ¤íŒ…

#### ì„ ì–¸ì  í•¨ìˆ˜ - í˜¸ì´ìŠ¤íŒ… O
```javascript
hello();

function hello() {
  console.log('Hello!');
}
```
#### í•¨ìˆ˜ í‘œí˜„ì‹ - í˜¸ì´ìŠ¤íŒ… X (ì—ëŸ¬ ë°œìƒ)
```javascript

hello(); // TypeError

var hello = function() {
  console.log('Hello!');
};
```
---
#### 6. thisì™€ ì½œë°± í•¨ìˆ˜ì—ì„œì˜ ìš°íšŒ
```javascript
var relationship1 = {
  name: 'zero',
  friends: ['nero', 'hero', 'xero'],
  logFriends: function () {
    var that = this;  // this ì €ì¥
    this.friends.forEach(function (friend) {
      console.log(that.name, friend);  // thatìœ¼ë¡œ this ì ‘ê·¼
    });
  },
};
relationship1.logFriends();
```

- thisëŠ” ë°”ë¡œ ì• ê°ì²´ë¥¼ ê°€ë¦¬í‚´
- forEach ë‚´ë¶€ì—ì„œëŠ” thisê°€ ë‹¬ë¼ì§€ë¯€ë¡œ thatì— thisë¥¼ ì €ì¥í•´ í•´ê²°
---
#### 7. í•¨ìˆ˜ ì €ì¥ê³¼ í˜¸ì¶œ ì°¨ì´
```javascript
var candyMachine = {
  status: {
    name: 'node',
    count: 5,
  },
  getCandy: function () {
    this.status.count--;
    return this.status.count;
  },
};
var getCandy = candyMachine.getCandy;
var count = candyMachine.status.count;

console.log(getCandy); // í•¨ìˆ˜ ìì²´ ì¶œë ¥
console.log(count); // 5 ì¶œë ¥

â€¢ getCandy: í•¨ìˆ˜ ì €ì¥ (í˜¸ì¶œ ì•„ë‹˜)
â€¢ count: ê°’ ì§ì ‘ ì ‘ê·¼
```
---
#### 8. í´ë˜ìŠ¤ì™€ ìƒì†
```javascript
class Human {
  constructor(type = 'human') {
    this.type = type;
  }

  static isHuman(human) {
    return human instanceof Human;
  }

  static breathe() {
    alert('h-a-a-a-m');
  }
}

class Zero extends Human {
  constructor(type, firstName, lastName) {
    super(type);
    this.firstName = firstName;
    this.lastName = lastName;
  }

  sayName() {
    super.breathe();
    alert(`${this.firstName} ${this.lastName}`);
  }
}

const newZero = new Zero('human', 'Zero', 'Cho');
console.log(Human.isHuman(newZero)) // true
console.log(Human.breathe())
// console.log(newZero.sayName())
```
- super(): ë¶€ëª¨ í´ë˜ìŠ¤ ìƒì„±ì í˜¸ì¶œ
- static: í´ë˜ìŠ¤ ë©”ì„œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ ì—†ì´ í˜¸ì¶œ ê°€ëŠ¥
- instanceof: í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ì—¬ë¶€ í™•ì¸
---
#### URL
- url ì²˜ë¦¬ì—ëŠ” í¬ ë‘ì§€ ë°©ì‹ì´ ìˆë‹¤
í•˜ëŠ” ë…¸ë“œ ë²„ì „ 7ì—ì„œ ì¶”ëœ WHATWG(ì›¹ í‘œì¤€ì„ ì •í•˜ëŠ” ë‹¨ì²´ì˜ ì´ë¦„) ë°©ì‹ì˜ urlì´ê³ , ë‹¤ë¥¸ í•˜ë‚˜ëŠ” ì˜ˆì „ë¶€í„° ë…¸ë“œì—ì„œ ì‚¬ìš©í•˜ë˜ urlë°©ì‹ ìš”ì¦˜ì€ WHATWGë§Œ ì‚¬ìš©
- url.format(ê°ì²´): ë¶„í•´ë˜ì—ˆë‹¤ë©´ url ê°ì²´ë¥¼ ë‹¤ì‹œ ì›ë˜ ìƒíƒœë¡œ ì¡°ë¦½í•©ë‹ˆë‹¤.
- getAll(í‚¤): í‚¤ì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  í‚¤ ê°’ì„ ê°€ì ¸ì˜´
- get(í‚¤): í‚¤ì— í•´ë‹¹í•˜ëŠ” ì²«ë²ˆì§¸ ê°’ë§Œ ê°€ì ¸ì˜´
- has(í‚¤): í•´ë‹¹ í‚¤ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ê²€ì‚¬í•¨
- keys(í‚¤): searchParamsì˜ ëª¨ë“  ê°’ì„ ë°˜ë³µê¸° ê°ì²´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
- append(í‚¤, ê°’): í•´ë‹¹ í‚¤ë¥¼ ì¶”ê°€ í•©ë‹ˆë‹¤. ê°™ì€ í‚¤ì˜ ê°’ì´ ìˆë‹¤ë©´ ìœ ì§€í•˜ê³  í•˜ë‚˜ ë” ì¶”ê°€ í•©ë‹ˆë‹¤.
- set(í‚¤, ê°’): appendì™€ ë¹„ìŠ·í•˜ì§€ë§Œ ê°™ì€ í‚¤ì˜ ê°’ë“¤ì„ëª¨ë‘ ì§€ìš°ê³  ìƒˆë¡œ ì¶”ê°€í•©ë‹ˆë‹¤.
- delete(í‚¤): í•´ë‹¹ í‚¤ë¥¼ ì œê±° í•©ë‹ˆë‹¤
- toString(): ì¡°ì‘í•œ searchParams ê°ì²´ë¥¼ ë‹¤ì‹œ ë¬¸ìì—´ë¡œ ë§Œë“ ë‹¤. ì´ ë¬¸ìì—´ì„ searchì— ëŒ€ì…í•˜ë©´ ì£¼ì†Œ ê°ì²´ì— ë°˜ì˜

#### DNS
- ì£¼ë¡œ ë„ë©”ì¸ì„ í†µí•´ IPë‚˜ í‚¤íƒ€ DNS ì •ë³´ë¥¼ ì–»ê³ ì í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

#### crypto
**ë‹¨ë°˜í–¥ ì•”í˜¸í™”**
- ë‹¨ë°©í–¥ ì•”í˜¸í™”ë€ ë³µí˜¸í™” í•  ìˆ˜ ì—†ëŠ” ì•”í˜¸í™” ë°©ì‹ì„ ëœ»í•©ë‹ˆë‹¤. ë³µí˜¸í™”ëŠ” ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ì›ë˜ ë¬¸ìì—´ë¡œ ë˜ëŒë ¤ ë†“ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, ë‹¨ë°©í–¥ ì•”í˜¸í™”ëŠ” í•œë²ˆ ì•”í˜¸í™”í™”ë©´ ì›ë˜ ë¬¸ìì—´ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë³µí˜¸í™” í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì•”í˜¸í™”ë¼ê³  í‘œí˜„í•˜ëŠ” ëŒ€ì‹  **í•´ì‹œ í•¨ìˆ˜** ë¼ê³  ë¶€ë¦¬ê¸°ë„í•¨

```javascript
const crypto = require('crypto');

console.log('base64:', crypto.createHash('sha512').update('ë¹„ë°€ë²ˆí˜¸').digest('base64'));
console.log('hex:', crypto.createHash('sha512').update('ë¹„ë°€ë²ˆí˜¸').digest('hex'));
console.log('base64:', crypto.createHash('sha512').update('ë‹¤ë¥¸ ë¹„ë°€ë²ˆí˜¸').digest('base64'));
```
- createHash: ì‚¬ìš©í•  í•´ì‰¬ ì•Œê³ ë¦¬ì¦˜ì„ ë„£ìŒ
- update(ë¬¸ìì—´): ë³€í™˜í•  ë¬¸ìì—´ì„ ë„£ìŠµë‹ˆë‹¤. 
- digest(ì¸ì½”ë”©): ì¸ì½”ë”©í•  ì•Œê³ ë¦¬ì¦˜ì„ ë„£ìŠµë‹ˆë‹¤.

- í˜„ì¬ëŠ” ì£¼ë¡œ pdkdf2, bcrypt, scryptë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•”í˜¸í™” í•œë‹¤. ë…¸ë“œì—ì„œëŠ” pbkdf2ë¥¼ ìì£¼ ì”€
pbkdf2ëŠ” ê°„ë‹¨íˆ ë§í•˜ë©´ ê¸°ì¡´ ë¬¸ìì—´ì— saltë¼ê³  ë¶ˆë¦¬ëŠ” ë¬¸ìì—´ì„ ë¶™ì¸ í›„ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ë°˜ë³µí•´ì„œ ì ìš©í•œë‹¤.

```javascript
const crypto = require('crypto');

crypto.randomBytes(64, (err, buf) => { //64ë°”ì´íŠ¸ ê¸¸ì´ì˜ ëœë¤í•œ ë¬¸ìì—´ ìƒì„± í›„ ì½œë°±í•¨ìˆ˜ ì‹¤í–‰
  const salt = buf.toString('base64'); //base64ë¡œ ì¸ì½”ë”©
  console.log('salt:', salt);//saltê°’ ì¶œë ¥
  crypto.pbkdf2('ë¹„ë°€ë²ˆí˜¸', salt, 100000, 64, 'sha512', (err, key) => { //ë¹„ë°€ë²ˆí˜¸, salt, ë°˜ë³µíšŸìˆ˜, ì¶œë ¥ë°”ì´íŠ¸, í•´ì‹œ ì•Œê³ ë¦¬ì¦˜
    console.log('password:', key.toString('base64'));//ë¹„ë°€ë²ˆí˜¸ ì¶œë ¥
  });
});
```
- randomByte() ë©”ì„œë“œë¡œ 64ë°”ì´íŠ¸ ê¸¸ì´ì˜ ë¬¸ìì—´ì„ ë§Œë“­ë‹ˆë‹¤. ì´ê²ƒì´ saltê°€ ëœë‹¤. 
pbkdf2() ë©”ì„œë“œì—ëŠ” ìˆœì„œëŒ€ë¡œ ë¹„ë°€ë²ˆí˜¸, salt, ë°˜ë³µ íšŸìˆ˜, ì¶œë ¥ ë°”ì´íŠ¸ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ì„ ì¸ìˆ˜ë¡œ ë„£ëŠ”ë‹¤.
ì˜ˆì‹œì—ì„œëŠ” 10ë§Œë²ˆ ë°˜ë³µí•´ì„œ ì ìš©í•œë‹¤.


### ì–‘ë°©í–¥ ì•”í˜¸í™”
- ì•”í˜¸í™”ëœ ë¬¸ìì—´ì„ ë³µí˜¸í™” í•  ìˆ˜ ìˆìœ¼ë©°, í‚¤ë¼ëŠ” ê²ƒì´ ì‚¬ìš©ëœë‹¤.
```javascript
const crypto = require('crypto'); // crypto ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°

const algorithm = 'aes-256-cbc'; // ì‚¬ìš©í•  ì•Œê³ ë¦¬ì¦˜ê³¼ í‚¤, ivê°’ ì„¤ì •
const key = 'abcdefghijklmnopqrstuvwxyz123456'; // keyëŠ” 32ë°”ì´íŠ¸ì—¬ì•¼ í•¨
const iv = '1234567890123456'; // ivëŠ” 16ë°”ì´íŠ¸ì—¬ì•¼ í•¨

const cipher = crypto.createCipheriv(algorithm, key, iv); // ì•”í˜¸í™” ìƒì„±
let result = cipher.update('ì•”í˜¸í™”í•  ë¬¸ì¥', 'utf8', 'base64');// ì•”í˜¸í™”í•  ë¬¸ì¥ê³¼ ì¸ì½”ë”©, ì¶œë ¥ ì¸ì½”ë”© ì„¤ì •
result += cipher.final('base64');// ì¶œë ¥ ì¸ì½”ë”© ì„¤ì •
console.log('ì•”í˜¸í™”:', result); // ì•”í˜¸í™”ëœ ë¬¸ì¥ ì¶œë ¥

const decipher = crypto.createDecipheriv(algorithm, key, iv);// ë³µí˜¸í™” ìƒì„±
let result2 = decipher.update(result, 'base64', 'utf8'); // ë³µí˜¸í™”í•  ë¬¸ì¥ê³¼ ì¸ì½”ë”©, ì¶œë ¥ ì¸ì½”ë”© ì„¤ì •
result2 += decipher.final('utf8');// ì¶œë ¥ ì¸ì½”ë”© ì„¤ì •
console.log('ë³µí˜¸í™”:', result2);// ë³µí˜¸í™”ëœ ë¬¸ì¥ ì¶œë ¥
```

#### utill
- ìœ í‹¸ì´ë¼ëŠ” ì´ë¦„ ì²˜ëŸ¼ ê°ì¢… í¸ì˜ ê¸°ëŠ¥ì„ ëª¨ì•„ë‘” ëª¨ë“ˆ. ê³„ì† í•´ì„œ APIê°€ ì¶”ê°€ ë˜ê³  ìˆìœ¼ë©°, ê°€ë” deprecatedë˜ì–´ ì‚¬ì•„ì§€ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.
- deprecatedë€ í”„ë¡œê·¸ë˜ë° ìš©ì–´ë¡œ ì¤‘ìš”ë„ê°€ ë–¨ì–´ì ¸ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•Šê³  ì•ìœ¼ë¡œëŠ” ì‚¬ë¼ì§€ê²Œ ë  ê²ƒì´ë¼ëŠ” ëœ»
ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ë‚˜ì™€ì„œ ê¸°ì¡´ ê¸°ëŠ¥ë³´ë‹¤ ë” ì¢‹ì„ë•Œ, ê¸°ì¡´ ê¸°ëŠ¥ì„ ë””í”„ë¦¬ì¼€ì´í‹°ë“œê°€ ì²˜ë¦¬í•˜ê³¤ í•œë‹¤.
ì´ì „ ì‚¬ìš©ìë¥¼ ìœ„í•´ ê¸°ëŠ¥ì„ ì œê±°í•˜ì§€ëŠ” ì•Šì§€ë§Œ ê³§ ì—†ì•¨ ì˜ˆì •ì´ë¯€ë¡œ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ë§ë¼ëŠ” ì˜ë¯¸.

#### worker_threads.js

`worker_threads` ëª¨ë“ˆì€ Node.jsì—ì„œ ë©€í‹° ìŠ¤ë ˆë”©ì„ ì§€ì›í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŠ” CPU ì§‘ì•½ì ì¸ ì‘ì—…ì„ ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë¶„ë¦¬í•˜ì—¬ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì£¼ì–´, ë©”ì¸ ìŠ¤ë ˆë“œê°€ ë¸”ë¡œí‚¹ë˜ì§€ ì•Šê³  ë‹¤ë¥¸ ì‘ì—…ì„ ê³„ì† ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ê³¼ ì‘ë‹µì„±ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì²« ë²ˆì§¸ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” ë‹¨ì¼ ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ì—¬ ë©”ì¸ ìŠ¤ë ˆë“œì™€ í†µì‹ í•˜ëŠ” ì˜ˆì œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³ , ì›Œì»¤ ìŠ¤ë ˆë“œë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ê±°ë‚˜ ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë  ë•Œ ë¡œê·¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. ì›Œì»¤ ìŠ¤ë ˆë“œëŠ” ë©”ì¸ ìŠ¤ë ˆë“œë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ê³ , ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ í›„ ì¢…ë£Œë©ë‹ˆë‹¤. ì´ ì˜ˆì œëŠ” ê¸°ë³¸ì ì¸ ë©”ì¸ ìŠ¤ë ˆë“œì™€ ì›Œì»¤ ìŠ¤ë ˆë“œ ê°„ì˜ ë©”ì‹œì§€ í†µì‹ ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

ë‘ ë²ˆì§¸ ì½”ë“œ ë¸”ë¡ì—ì„œëŠ” ì—¬ëŸ¬ ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì˜ˆì œë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œëŠ” `Set` ê°ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤. ê° ì›Œì»¤ ìŠ¤ë ˆë“œëŠ” `workerData`ë¥¼ í†µí•´ ì´ˆê¸° ë°ì´í„°ë¥¼ ë°›ì•„ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ê° ì›Œì»¤ ìŠ¤ë ˆë“œë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ê³ , ëª¨ë“  ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´ 'job done' ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. ì´ ì˜ˆì œëŠ” ì—¬ëŸ¬ ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³ , ê° ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì´í•´í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.

ì´ëŸ¬í•œ `worker_threads` ëª¨ë“ˆì„ ì‚¬ìš©í•˜ë©´ Node.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë©€í‹° ìŠ¤ë ˆë”©ì„ êµ¬í˜„í•˜ì—¬ CPU ì§‘ì•½ì ì¸ ì‘ì—…ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê³ , ë©”ì¸ ìŠ¤ë ˆë“œì˜ ì‘ë‹µì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
const {
  Worker, isMainThread, parentPort,
} = require('worker_threads');

if (isMainThread) { // ë¶€ëª¨ì¼ ë•Œ (ë©”ì¸ ìŠ¤ë ˆë“œ)
  const worker = new Worker(__filename);
  worker.on('message', message => console.log('from worker', message));
  worker.on('exit', () => console.log('worker exit'));
  worker.postMessage('ping');
} else { // ì›Œì»¤ì¼ ë•Œ
  parentPort.on('message', (value) => {
    console.log('from parent', value);
    parentPort.postMessage('pong');
    parentPort.close();
  });
}
```

```javascript
const {
  Worker, isMainThread, parentPort, workerData,
} = require('worker_threads');

if (isMainThread) { // ë¶€ëª¨ì¼ ë•Œ
  const threads = new Set(); // ì›Œì»¤ ìŠ¤ë ˆë“œë¥¼ ê´€ë¦¬í•  Set ê°ì²´ ìƒì„±
  threads.add(new Worker(__filename, { // í˜„ì¬ íŒŒì¼ì„ ì›Œì»¤ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰
    workerData: { start: 1 }, // workerDataë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ„
  }));
  threads.add(new Worker(__filename, { // í˜„ì¬ íŒŒì¼ì„ ì›Œì»¤ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰
    workerData: { start: 2 }, // workerDataë¡œ ë°ì´í„°ë¥¼ ë³´ëƒ„
  }));
  for (let worker of threads) {
    worker.on('message', message => console.log('from worker', message)); // ì›Œì»¤ ìŠ¤ë ˆë“œë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ìŒ
    worker.on('exit', () => { // ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´
      threads.delete(worker);// Set ê°ì²´ì—ì„œ ì‚­ì œ
      if (threads.size === 0) { // ëª¨ë“  ì›Œì»¤ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë˜ë©´
        console.log('job done'); // 'job done' ì¶œë ¥
      }
    });
  }
} else { // ì›Œì»¤ì¼ ë•Œ ì›Œì»¤ ìŠ¤ë ˆë“œë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ìŒ
  const data = workerData; // workerDataë¡œ ì „ë‹¬ëœ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
  parentPort.postMessage(data.start + 100); // ë¶€ëª¨ ìŠ¤ë ˆë“œë¡œ ë©”ì‹œì§€ë¥¼ ë³´ëƒ„
}
```
#### child_process
- ë…¸ë“œì—ì„œ ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê³  ì‹¶ê±°ë‚˜ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ì‹¶ì„ ë–„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“ˆ.
ì´ ëª¨ë“ˆì„ í†µí•´ ë‹¤ë¥¸ ì–¸ì–´ì˜ ì½”ë“œ(ì˜ˆë¥¼ ë“¤ë©´, íŒŒì´ì¬)ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ê°’ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¦„ì´ child_process(ìì‹í”„ë¡œì„¸ìŠ¤)ì¸ ì´ìœ ëŠ” í˜„ì¬ ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ ì™¸ì— ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ì›Œì„œ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•˜ê³  ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ì— ê²°ê³¼ë¥¼ ì•Œë ¤ ì£¼ê¸° ë–„ë¬¸ì´ë‹¤.
```javascript
const exec = require('child_process').exec;

const process = exec('dir');

process.stdout.on('data', function(data) {
  console.log(data.toString());
}); // ì‹¤í–‰ ê²°ê³¼

process.stderr.on('data', function(data) {
  console.error(data.toString());
}); // ì‹¤í–‰ ì—ëŸ¬1
```
#### ê¸°íƒ€ ëª¨ë“ˆë“¤
- async_hooks: ë¹„ë™ê¸° ì½”ë“œì˜ íë¦„ì„ ì¶”ì í•  ìˆ˜ ìˆëŠ” ì‹¤í—˜ì ì¸ ëª¨ë“ˆì…ë‹ˆë‹¤.
- dgram: UDPì™€ ê´€ë ¨ëœ ì‘ì—…ì„ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
- net: httpë³´ì•„ ë¡œìš° ë ˆë²¨ì¸ TCPë‚˜ IPC í†µì‹ ì„ í•  ë–„ ì‚¬ìš©í•©ë‹ˆë‹¤.

---
#### íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼í•˜ê¸°
- fs ëª¨ë“ˆì€ íŒŒì¼ ì‹œìŠ¤í…œì— ì ‘ê·¼í•˜ëŠ” ëª¨ë“ˆ ì…ë‹ˆë‹¤. ì¦‰ íŒŒì¼ì„ ìƒì„±í•˜ê±°ë‚˜ ì‚­ì œí•˜ê³ , ì½ê±°ë‚˜ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, í´ë”ë„ ë§Œë“¤ê±°ë‚˜ ì§€ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ì¼ë¶€ë¥¼ ì œì™¸í•˜ê³ ëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ì´ ê¸ˆì§€ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ë…¸ë“œ fs ëª¨ë“ˆì´ ë‚¯ì„¤ ê²ƒì´ë‹¤.
```javascript
const fs = require('fs'); // íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë“ˆ

fs.readFile('./readme.txt', (err, data) => { // íŒŒì¼ ì½ê¸° ë©”ì„œë“œ readFile (ë¹„ë™ê¸°) / readFileSync (ë™ê¸°) 
  if (err) {  // ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
    throw err;
  }
  console.log(data); // íŒŒì¼ ë‚´ìš© ì¶œë ¥ buffer ë¼ëŠ” ì´ìƒí•œ ê²ƒì´ ì¶œë ¥ì´ ë¨
  console.log(data.toString());// íŒŒì¼ ë‚´ìš©ì„ ë¬¸ìì—´ë¡œ ì¶œë ¥ toString()ì„ ì´ìš©í•´ì„œ ë¬¸ìì—´ë¡œ ì¶œë ¥ ì‹œí‚¨ë‹¤.
});
// í”„ë¡œë¯¸ìŠ¤ ë²„ì „
const fs = require('fs').promises; // íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë“ˆ

fs.readFile('./readme.txt') // íŒŒì¼ ì½ê¸° ë©”ì„œë“œ readFile 
  .then((data) => { // ì„±ê³µ ì‹œ data ì¶œë ¥ / ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì¶œë ¥
    console.log(data);
    console.log(data.toString()); // íŒŒì¼ ë‚´ìš©ì„ ë¬¸ìì—´ë¡œ ì¶œë ¥
  })
  .catch((err) => {
    console.error(err);
  });

```
- readFileì˜ ê²°ê³¼ë¬¼ì€ **ë²„í¼**ë¼ëŠ” í˜•ì‹ìœ¼ë¡œ ì œê³µëœë‹¤. ë²„í¼ëŠ” ì‚¬ëŒì´ ì½ì„ ìˆ˜ ìˆëŠ” í˜•ì‹ì´ ì•„ë‹ˆë¯€ë¡œ **toString()**ì„ ì‚¬ìš©í•´ ë¬¸ìì—´ë¡œ ë³€í™˜í–ˆìŠµë‹ˆë‹¤.

```javascript
const fs = require('fs'); // íŒŒì¼ ì‹œìŠ¤í…œ ëª¨ë“ˆ

fs.writeFile('./writeme.txt', 'ê¸€ì´ ì…ë ¥ë©ë‹ˆë‹¤', (err) => { // íŒŒì¼ ì“°ê¸° ë©”ì„œë“œ writeFile (ë¹„ë™ê¸°) / writeFileSync (ë™ê¸°)
  if (err) {
    throw err;
  }
  fs.readFile('./writeme.txt', (err, data) => { // íŒŒì¼ ì½ê¸° ë©”ì„œë“œ readFile (ë¹„ë™ê¸°)
    if (err) {
      throw err;
    }
    console.log(data.toString()); //  íŒŒì¼ ë‚´ìš© ì¶œë ¥
  });
});
```
#### ë™ê¸° ë©”ì„œë“œì™€ ë¹„ê³µê¸° ë©”ì„œë“œ
- setTimeout ê°™ì€ íƒ€ì´ë¨¸ì™€ process.nextTick ì™¸ì—ë„, ë…¸ë“œëŠ” ëŒ€ë¶€ë¶„ì˜ ë©”ì„œë“œë¥¼ ë¹„ë™ê¸° ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. í•˜ì§€ë§Œ ëª‡ëª‡ ë©”ì„œë“œëŠ” ë™ê¸° ë°©ì‹ìœ¼ë¡œë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. íŠ¹íˆ fs ëª¨ë“ˆì´ ê·¸ëŸ¬í•œ ë©”ì„œë“œë¥¼ ë§ì´ ê°–ê³  ìˆë‹¤. 
```javascript
const fs = require('fs');

console.log('ì‹œì‘');
fs.readFile('./readme2.txt', (err, data) => {
  if (err) {
    throw err;
  }
  console.log('1ë²ˆ', data.toString());
});
fs.readFile('./readme2.txt', (err, data) => {
  if (err) {
    throw err;
  }
  console.log('2ë²ˆ', data.toString());
});
fs.readFile('./readme2.txt', (err, data) => {
  if (err) {
    throw err;
  }
  console.log('3ë²ˆ', data.toString());
});
console.log('ë');
// ë¹„ë™ê¸°
const fs = require('fs');

console.log('ì‹œì‘');
let data = fs.readFileSync('./readme2.txt');
console.log('1ë²ˆ', data.toString());
data = fs.readFileSync('./readme2.txt');
console.log('2ë²ˆ', data.toString());
data = fs.readFileSync('./readme2.txt');
console.log('3ë²ˆ', data.toString());
console.log('ë');
```
#### Sync ë©”ì„œë“œì˜ ë¬¸ì œì  ì •ë¦¬

#### ê°œë…
`readFileSync` ê°™ì€ **Sync(ë™ê¸°) ë©”ì„œë“œ**ëŠ” ì½”ë“œ íë¦„ì„ ì´í•´í•˜ê¸°ëŠ” ì‰½ì§€ë§Œ,  
**ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ì¹˜ëª…ì ì¸ ë‹¨ì **ì´ ìˆìŠµë‹ˆë‹¤.

---

#### ë¬¸ì œì  ìš”ì•½
- Sync ë©”ì„œë“œëŠ” **ì´ì „ ì‘ì—…ì´ ëë‚˜ì•¼ë§Œ ë‹¤ìŒ ì‘ì—… ì§„í–‰** ê°€ëŠ¥
- íŒŒì¼ì„ ì½ëŠ” ë™ì•ˆ ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ëŒ€ê¸° ìƒíƒœ (ì•„ë¬´ ì¼ë„ ëª»í•¨)
- íŠ¹íˆ, ìš”ì²­ì´ ìˆ˜ë°± ê°œ ì´ìƒ ëª°ë¦´ ê²½ìš° ì‹¬ê°í•œ ì„±ëŠ¥ ì €í•˜ ë°œìƒ

---

#### ë¹„íš¨ìœ¨ì ì¸ ì´ìœ 
| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… | íŒŒì¼ ì½ê¸° ê°™ì€ I/O ì‘ì—…ì€ ë³´í†µ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰ |
| ë©”ì¸ ìŠ¤ë ˆë“œ | ë‹¤ìŒ ì‘ì—…ì„ ëª»í•˜ê³  ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ì™„ë£Œë§Œ ê¸°ë‹¤ë¦¼ |
| ê²°ê³¼ | ë©”ì¸ ìŠ¤ë ˆë“œê°€ ë†€ê³  ìˆëŠ” ë¹„íš¨ìœ¨ ë°œìƒ (ë¦¬ì†ŒìŠ¤ ë‚­ë¹„) |

---

#### ìš”ì  ì •ë¦¬
| êµ¬ë¶„ | ë™ê¸°(Sync) | ë¹„ë™ê¸°(Async) |
|---|---|---|
| ì‘ì—… ë°©ì‹ | ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸° | ëŒ€ê¸°í•˜ì§€ ì•Šê³  ë‹¤ìŒ ì‘ì—… ì§„í–‰ |
| ì„±ëŠ¥ | ìš”ì²­ ëª°ë¦´ ë•Œ ì„±ëŠ¥ ì €í•˜ | íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥ |
| ì½”ë“œ ë‚œì´ë„ | ì‰¬ì›€ | ìƒëŒ€ì ìœ¼ë¡œ ì–´ë ¤ì›€ |
| ì¶”ì²œ ìƒí™© | í…ŒìŠ¤íŠ¸/ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ | ì‹¤ë¬´ ì„œë¹„ìŠ¤/ì„œë²„ ê°œë°œ |

---

#### ê²°ë¡ 
> Sync ë©”ì„œë“œëŠ” íë¦„ì€ ë‹¨ìˆœí•´ì„œ ë°°ìš°ê¸° ì‰½ì§€ë§Œ,  
> ì‹¤ë¬´ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì„±ëŠ¥ ë¬¸ì œ ë•Œë¬¸ì— ê±°ì˜ ì“°ì§€ ì•ŠëŠ”ë‹¤.  
> **Node.jsì˜ ê°•ì ì€ ë¹„ë™ê¸° ì²˜ë¦¬ì´ë¯€ë¡œ, ì‹¤ë¬´ì—ì„œëŠ” ë°˜ë“œì‹œ ë¹„ë™ê¸° ë°©ì‹**ì„ ì¶”ì²œ!

---

#### ì¶”ì²œ ë°©ë²•
| ìƒí™© | ì¶”ì²œ ë©”ì„œë“œ |
|---|---|
| íŒŒì¼ ì½ê¸° | `fs.readFile` (ë¹„ë™ê¸°) |
| DB ì¡°íšŒ | ë¹„ë™ê¸° ì¿¼ë¦¬ ì‚¬ìš© |
| ë„¤íŠ¸ì›Œí¬ ìš”ì²­ | `axios`, `fetch` ë“± ë¹„ë™ê¸° ìš”ì²­ |

---

```javascript
const fs = require('fs').promises;

console.log('ì‹œì‘');

// readFile ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ 'readme2.txt' íŒŒì¼ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì½ìŒ
fs.readFile('./readme2.txt')
  .then((data) => {
    // ì²« ë²ˆì§¸ íŒŒì¼ ì½ê¸°ê°€ ì™„ë£Œë˜ë©´ ì‹¤í–‰ë¨
    console.log('1ë²ˆ', data.toString());
    // ë‘ ë²ˆì§¸ íŒŒì¼ ì½ê¸°ë¥¼ ì‹œì‘í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë‹¤ìŒ then ë¸”ë¡ìœ¼ë¡œ ì „ë‹¬
    return fs.readFile('./readme2.txt');
  })
  .then((data) => {
    // ë‘ ë²ˆì§¸ íŒŒì¼ ì½ê¸°ê°€ ì™„ë£Œë˜ë©´ ì‹¤í–‰ë¨
    console.log('2ë²ˆ', data.toString());
    // ì„¸ ë²ˆì§¸ íŒŒì¼ ì½ê¸°ë¥¼ ì‹œì‘í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë‹¤ìŒ then ë¸”ë¡ìœ¼ë¡œ ì „ë‹¬
    return fs.readFile('./readme2.txt');
  })
  .then((data) => {
    // ì„¸ ë²ˆì§¸ íŒŒì¼ ì½ê¸°ê°€ ì™„ë£Œë˜ë©´ ì‹¤í–‰ë¨
    console.log('3ë²ˆ', data.toString());
    console.log('ë');
  })
  .catch((err) => {
    // íŒŒì¼ ì½ê¸° ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì‹¤í–‰ë¨
    console.error(err);
  });
  ```
#### ë²„í¼ì™€ ìŠ¤íŠ¸ë¦¼ ì´í•´í•˜ê¸°

#### ë²„í¼(Buffer)ë€?
- **ë²„í¼ë§**: ì˜ìƒì„ ì¬ìƒí•  ìˆ˜ ìˆì„ ë§Œí¼ ë°ì´í„°ë¥¼ **ëª¨ì•„ë‘ëŠ” ë™ì‘**
- ë…¸ë“œì—ì„œ íŒŒì¼ì„ ì½ì„ ë•Œ, íŒŒì¼ í¬ê¸°ë§Œí¼ ë©”ëª¨ë¦¬ë¥¼ í™•ë³´í•˜ê³  ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ”ë°,  
  ì´ ì €ì¥ëœ ë°ì´í„° ë©ì–´ë¦¬ê°€ **ë²„í¼**ë‹¤.

#### ìŠ¤íŠ¸ë¦¼(Stream)ì´ë€?
- ë°ì´í„°ë¥¼ **ì¡°ê°ì¡°ê° ë‚˜ëˆ ì„œ ì „ì†¡**í•˜ëŠ” ë°©ì‹
- ì˜ˆ) ë¼ì´ë¸Œ ë°©ì†¡ì—ì„œ ë°©ì†¡ì¸ì˜ ì»´í“¨í„°ì—ì„œ ì‹œì²­ìì—ê²Œ ì˜ìƒ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ê²ƒ

#### ë²„í¼ë§ vs ìŠ¤íŠ¸ë¦¬ë° ë¹„êµ
| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| ë²„í¼ë§ | ì¬ìƒ ì „ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ëª¨ì•„ë‘  |
| ìŠ¤íŠ¸ë¦¬ë° | ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°ê¸ˆì”© ì „ì†¡ |
| ê´€ê³„ | ìŠ¤íŠ¸ë¦¬ë° ì¤‘ì—ë„ ë„¤íŠ¸ì›Œí¬ ì†ë„ê°€ ëŠë¦¬ë©´ ë²„í¼ë§ ë°œìƒ ê°€ëŠ¥ |

---

## ğŸ“‚ ë…¸ë“œì—ì„œì˜ ë²„í¼ì™€ ìŠ¤íŠ¸ë¦¼
| ì‘ì—… | ì„¤ëª… |
|---|---|
| íŒŒì¼ ì½ê¸° (`readFile`) | íŒŒì¼ ì „ì²´ë¥¼ ë²„í¼ë¡œ ì½ì–´ ë©”ëª¨ë¦¬ì— ì €ì¥ |
| íŒŒì¼ ìŠ¤íŠ¸ë¦¬ë° (`createReadStream`) | íŒŒì¼ì„ **ì¡°ê°** ë‹¨ìœ„ë¡œ ì½ì–´ì„œ ë°”ë¡œ ì²˜ë¦¬ ê°€ëŠ¥ |

---

#### ìŠ¤íŠ¸ë¦¼ì˜ í•µì‹¬ ê°œë…: íŒŒì´í•‘(Piping)
- ìŠ¤íŠ¸ë¦¼ë¼ë¦¬ ì—°ê²°í•˜ëŠ” ì‘ì—…ì„ **íŒŒì´í•‘**ì´ë¼ê³  í•¨
- ì˜ˆ) íŒŒì¼ì„ ì½ëŠ” ìŠ¤íŠ¸ë¦¼ê³¼ ì“°ëŠ” ìŠ¤íŠ¸ë¦¼ì„ ì—°ê²°í•˜ë©´:
    - ì½ìœ¼ë©´ì„œ ë°”ë¡œ ì”€ (ë©”ëª¨ë¦¬ ì ˆì•½ + ë¹ ë¥¸ ì²˜ë¦¬)


```javascript
const fs = require('fs');

const readStream = fs.createReadStream('readme4.txt'); // íŒŒì¼ì„ ì½ì–´ì˜¤ëŠ” ìŠ¤íŠ¸ë¦¼ ìƒì„±
const writeStream = fs.createWriteStream('writeme3.txt'); // íŒŒì¼ì„ ì“°ëŠ” ìŠ¤íŠ¸ë¦¼ ìƒì„±
readStream.pipe(writeStream); // íŒŒì´í•‘

const zlibStream = zlib.createGzip(); // zlib ìŠ¤íŠ¸ë¦¼ ìƒì„±
```
- zlibStream: zlib ëª¨ë“ˆë„ ì œê³µí•˜ì—¬ ë²„í¼ ë°ì´í„°ê°€ ì „ë‹¬ë˜ë‹¤ê°€ gzip ì••ì¶•ì„ ê±°ì¹œ í›„ ì••ì¶• íŒŒì¼ì„ ìƒì„±í•œë‹¤.
---

#### ê¸°íƒ€ fs ë©”ì„œë“œ ì•Œì•„ë³´ê¸°
```javascript
const fs = require('fs');
//fs.access(ê²½ë¡œ, ì˜µì…˜, ì½œë°±)
fs.access('./folder', fs.constants.F_OK | fs.constants.R_OK | fs.constants.W_OK, (err) => { // í´ë”ë‚˜ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ ì²´í¬
  if (err) {
    if (err.code === 'ENOENT') {
      console.log('í´ë” ì—†ìŒ');
      //fs.mkdir (ê²½ë¡œ, ì½œë°±)
      fs.mkdir('./folder', (err) => {  // í´ë” ìƒì„±
        if (err) {
          throw err;
        }
        console.log('í´ë” ë§Œë“¤ê¸° ì„±ê³µ');
        //fs.open(ê²½ë¡œ, ì˜µì…˜, ì½œë°±)
        fs.open('./folder/file.js', 'w', (err, fd) => { // íŒŒì¼ ìƒì„±
          if (err) {
            throw err;
          }
          console.log('ë¹ˆ íŒŒì¼ ë§Œë“¤ê¸° ì„±ê³µ', fd);
          //fs.rename(ê¸°ì¡´ ê²½ë¡œ, ìƒˆ ê²½ë¡œ, ì½œë°±)
          fs.rename('./folder/file.js', './folder/newfile.js', (err) => { //  íŒŒì¼ ì´ë¦„ ë°”ê¾¸ê¸°
            if (err) {
              throw err;
            }
            console.log('ì´ë¦„ ë°”ê¾¸ê¸° ì„±ê³µ');
          });
        });
      });
    } else {
      throw err;
    }
  } else {
    console.log('ì´ë¯¸ í´ë” ìˆìŒ');
  }
});

// í”„ë¡œë¯¸ìŠ¤ ë²„ì „

const fs = require('fs').promises;
const constants = require('fs').constants;

fs.access('./folder', constants.F_OK | constants.W_OK | constants.R_OK)
  .then(() => {
    return Promise.reject('ì´ë¯¸ í´ë” ìˆìŒ');
  })
  .catch((err) => {
    if (err.code === 'ENOENT') {
      console.log('í´ë” ì—†ìŒ');
      return fs.mkdir('./folder');
    }
    return Promise.reject(err);
  })
  .then(() => {
    console.log('í´ë” ë§Œë“¤ê¸° ì„±ê³µ');
    return fs.open('./folder/file.js', 'w');
  })
  .then((fd) => {
    console.log('ë¹ˆ íŒŒì¼ ë§Œë“¤ê¸° ì„±ê³µ', fd);
    return fs.rename('./folder/file.js', './folder/newfile.js');
  })
  .then(() => {
    console.log('ì´ë¦„ ë°”ê¾¸ê¸° ì„±ê³µ');
  })
  .catch((err) => {
    console.error(err);
  });

```

#### ìŠ¤ë ˆë“œ í’€(Thread Pool) ì •ë¦¬

#### ê°œë…
- Node.jsì˜ **fs ëª¨ë“ˆ ë¹„ë™ê¸° ë©”ì„œë“œ**ë“¤ì€ ì‹¤ì œë¡œ **ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰**ë¨
- ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‘ì—…í•œ í›„, ì™„ë£Œë˜ë©´ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ **ì½œë°± í•¨ìˆ˜**ë‚˜ **í”„ë¡œë¯¸ìŠ¤ì˜ then**ì„ ì‹¤í–‰

#### í•µì‹¬ í¬ì¸íŠ¸
- Node.jsëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œì§€ë§Œ, **ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ì€ ìŠ¤ë ˆë“œ í’€**ì—ì„œ ì²˜ë¦¬
- **fs, crypto, zlib ê°™ì€ ì¼ë¶€ ëª¨ë“ˆë“¤ì€ ë‚´ë¶€ì ìœ¼ë¡œ ìŠ¤ë ˆë“œ í’€ì„ ì‚¬ìš©**
- ë•ë¶„ì— **ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì„ ë™ì‹œì— ì²˜ë¦¬ ê°€ëŠ¥**

#### ìŠ¤ë ˆë“œ í’€ íë¦„ ì •ë¦¬
| ë‹¨ê³„ | ì„¤ëª… |
|---|---|
| 1 | fs ë¹„ë™ê¸° ë©”ì„œë“œ í˜¸ì¶œ |
| 2 | ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìŠ¤ë ˆë“œ í’€ì— ì‘ì—… ìš”ì²­ |
| 3 | ìŠ¤ë ˆë“œ í’€ì—ì„œ ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ìˆ˜í–‰ |
| 4 | ì‘ì—… ì™„ë£Œ í›„, ë©”ì¸ ìŠ¤ë ˆë“œë¡œ ê²°ê³¼ ì „ë‹¬ (ì½œë°± or then ì‹¤í–‰) |

####  ìš”ì  ì •ë¦¬
| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| ë©”ì¸ ìŠ¤ë ˆë“œ | ìš”ì²­ ë°›ê³  ì‘ë‹µí•˜ëŠ” ì—­í•  (ì´ë²¤íŠ¸ ë£¨í”„ ë‹´ë‹¹) |
| ìŠ¤ë ˆë“œ í’€ | ë¬´ê±°ìš´ I/O ì‘ì—… ì²˜ë¦¬ ë‹´ë‹¹ |
| ì§€ì› ëª¨ë“ˆ | fs, crypto, zlib ë“± |
| ë™ì‹œ ì²˜ë¦¬ | ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬ ê°€ëŠ¥ |

#### ê²°ë¡ 
> **Node.jsëŠ” ë©”ì¸ ìŠ¤ë ˆë“œëŠ” í•˜ë‚˜ì§€ë§Œ, ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìŠ¤ë ˆë“œ í’€ì´ ì—¬ëŸ¬ ì‘ì—…ì„ ë³‘ë ¬ë¡œ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡° ë•ë¶„ì— ì„±ëŠ¥ì´ ì¢‹ì•„ì§„ë‹¤.**

---

```javascript
const crypto = require('crypto');

const pass = 'pass'; // ë¹„ë°€ë²ˆí˜¸
const salt = 'salt'; // ì†”íŠ¸ ê°’
const start = Date.now(); // ì‹œì‘ ì‹œê°„ ê¸°ë¡

// ì²« ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('1:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ë‘ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('2:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ì„¸ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('3:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ë„¤ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('4:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ë‹¤ì„¯ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('5:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ì—¬ì„¯ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('6:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ì¼ê³± ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('7:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});

// ì—¬ëŸ ë²ˆì§¸ ë¹„ë™ê¸° pbkdf2 í•¨ìˆ˜ í˜¸ì¶œ
crypto.pbkdf2(pass, salt, 1000000, 128, 'sha512', () => {
  console.log('8:', Date.now() - start); // ì‘ì—… ì™„ë£Œ ì‹œê°„ ì¶œë ¥
});
```
- UV_THREADPOOL_SIZE=1 ì´ë ‡ê²Œ ì…ë ¥í•˜ë©´ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ ëŒ

---
### 4ì¥

- ìš”ì²­(Request): í´ë¼ì´ì–¸íŠ¸ -> ì„œë²„ë¡œ ë³´ë‚´ëŠ” ë°ì´í„° (ex. GET, POST ë°©ì‹ê³¼ URL ì •ë³´ í¬í•¨)
- ì‘ë‹µ(Response): ì„œë²„ -> í´ë¼ì´ì–¸íŠ¸ë¡œ ë³´ë‚´ëŠ” ë°ì´í„°(ex. HTML, JSON, ìƒíƒœ ì½”ë“œ ë“±)


```javascript
const http = require('http'); //  1. http ëª¨ë“ˆì„ requireë¡œ ë¶ˆëŸ¬ì˜¨ë‹¤.

const server = http.createServer((req, res) => { // 2. http ëª¨ë“ˆì—ëŠ” createServer ë©”ì„œë“œê°€ ìˆë‹¤. ì´ ë©”ì„œë“œëŠ” ì¸ìë¡œ ìš”ì²­ì— ëŒ€í•œ ì½œë°± í•¨ìˆ˜ë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤.
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.write('<h1>Hello Node!</h1>');
  res.end('<p>Hello Server!</p>');
});
server.listen(8080); // 3. listen ë©”ì„œë“œì— í¬íŠ¸ì™€ í˜¸ìŠ¤íŠ¸ë¥¼ ë„£ì–´ ì„œë²„ë¥¼ ì‹¤í–‰í•œë‹¤.

server.on('listening', () => {
  console.log('8080ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤!');
});
server.on('error', (error) => {
  console.error(error);
});
```
---



#### REST & REST API ê°œë… ì •ë¦¬

#### RESTë€?
- **REST (REpresentational State Transfer)**  
  - ì„œë²„ì˜ ìì›ì„ ì •ì˜í•˜ê³ , **ìì›ì— ëŒ€í•œ ì£¼ì†Œ(URL)ë¥¼ ì§€ì •í•˜ëŠ” ë°©ë²•**
  - íŠ¹ì •í•œ **ì•½ì†**ì„ ì •í•´ì„œ, APIë¥¼ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì„¤ê³„í•˜ëŠ” ë°©ì‹

---

#### REST API ê¸°ë³¸ ê·œì¹™
 **ìì›(Resource)**  
   - ìì›ì€ ê¼­ íŒŒì¼ì´ ì•„ë‹ˆë¼, **ì„œë²„ê°€ ì œê³µí•˜ëŠ” ëª¨ë“  ë°ì´í„°**ë¥¼ ì˜ë¯¸
   - ì˜ˆ) ì‚¬ìš©ì ì •ë³´, ê²Œì‹œê¸€, ëŒ“ê¸€ ë“±

 **RESTful URL**  
   - ì£¼ì†Œ(URL)ëŠ” ì˜ë¯¸ë¥¼ ëª…í™•íˆ ì „ë‹¬í•˜ê¸° ìœ„í•´ **ëª…ì‚¬ë¡œ êµ¬ì„±**
   - ì˜ˆ)
     - `/user` â†’ ì‚¬ìš©ì ì •ë³´ ê´€ë ¨ API
     - `/post` â†’ ê²Œì‹œê¸€ ì •ë³´ ê´€ë ¨ API

 **HTTP ìš”ì²­ ë©”ì„œë“œ**  
   - REST APIì—ì„œëŠ” **HTTP ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í–‰ë™ì„ í‘œí˜„**

---

#### RESTful API - HTTP ìš”ì²­ ë©”ì„œë“œ ì •ë¦¬

| ë©”ì„œë“œ | ì„¤ëª… | ë°ì´í„° í¬í•¨ ì—¬ë¶€ |
|---|---|---|
| **GET** | ì„œë²„ì—ì„œ ìì›ì„ ì¡°íšŒ | âŒ (ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ì‚¬ìš©) |
| **POST** | ìƒˆë¡œìš´ ìì› ìƒì„± | âœ… ìš”ì²­ ë³¸ë¬¸(body)ì— í¬í•¨ |
| **PUT** | ê¸°ì¡´ ìì› ì „ì²´ êµì²´ | âœ… ìš”ì²­ ë³¸ë¬¸(body)ì— í¬í•¨ |
| **PATCH** | ê¸°ì¡´ ìì›ì˜ ì¼ë¶€ ìˆ˜ì • | âœ… ìš”ì²­ ë³¸ë¬¸(body)ì— í¬í•¨ |
| **DELETE** | ìì› ì‚­ì œ | âŒ |
| **OPTIONS** | ìš”ì²­ ì „ì— í†µì‹  ì˜µì…˜ í™•ì¸ | âŒ |

---

#### HTTP ìš”ì²­ ì˜ˆì‹œ
| ìš”ì²­ ë°©ì‹ | URL | ì˜ë¯¸ |
|---|---|---|
| `GET /user` | `/user` ìì›ì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´ (ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ) |
| `POST /user` | `/user` ìì›ì— ìƒˆë¡œìš´ ì‚¬ìš©ì ì¶”ê°€ |
| `PUT /user/1` | `/user/1` ìì›ì„ ìƒˆë¡œìš´ ë°ì´í„°ë¡œ **ì „ì²´ ë³€ê²½** |
| `PATCH /user/1` | `/user/1` ìì›ì˜ ì¼ë¶€ë§Œ ë³€ê²½ |
| `DELETE /user/1` | `/user/1` ìì›ì„ ì‚­ì œ |

---

#### RESTful API ì„¤ê³„ ì›ì¹™
âœ”ï¸ **URLì€ ëª…ì‚¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨** (`/getUser âŒ â†’ /user

---
### httpsì™€ http2
## ğŸ“– httpsë€?
`https` ëª¨ë“ˆì€ ì›¹ ì„œë²„ì— **SSL ì•”í˜¸í™”**ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.  
í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— GETì´ë‚˜ POST ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, ì˜¤ê°€ëŠ” ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•˜ì—¬  
**ì¤‘ê°„ì—ì„œ ë°ì´í„°ê°€ ê°€ë¡œì±„ì—¬ë„ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ì—†ê²Œ ë³´í˜¸**í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

---
### ì¿ í‚¤ì™€ ì„¸ì…˜
- ì¿ í‚¤(Cookie)
- í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥ë˜ëŠ” ë°ì´í„°
-  ì„œë²„ê°€ ì‘ë‹µì‹œ `Set-Cookie`ë¼ëŠ” í—¤ë”ì— ì¿ í‚¤ ì •ë³´ë¥¼ ë‹´ì•„ ì „ì†¡
-  ì´í›„ í´ë¼ì´ì–¸íŠ¸ëŠ” ê°™ì€ ì„œë²„ë¡œ ìš”ì²­í•  ë•Œë§ˆë‹¤ ì¿ í‚¤ë¥¼ ìë™ìœ¼ë¡œ ìš”ì²­ í—¤ë”(`cookie`)ì— í¬í•¨í•´ ì „ì†¡
-  **Key-Value** í˜•íƒœë¡œ ì €ì¥(ì˜ˆ:`name=sewon`)

- ì„¸ì…˜(Session)
- ì„œë²„ì— ì €ì¥ë˜ëŠ” ë°ì´í„°
- í´ë¼ì´ì–¸íŠ¸ëŠ” ì„¸ì…˜ì˜ ê³ ìœ  ì‹ë³„ì(`Session ID`)ë§Œ ì¿ í‚¤ì— ì €ì¥
- ì„¸ì…˜ IDë¥¼ í†µí•´ ì„œë²„ì— í•´ë‹¹ ì‚¬ìš©ìì— ë°ì´í„°(ì„¸ì…˜ ì •ë³´)ë¥¼ ì¡°íšŒ
  
#### ì¿ í‚¤ ì˜ˆì œ(ë‹¨ìˆœ ì¿ í‚¤ ì„¤ì •)
- í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•  ë•Œë§ˆë‹¤ ì„œë²„ëŠ” `req.headers.cookie`ì—ì„œ ì¿ í‚¤ë¥¼ í™•ì¸í•˜ê³  ì¶œë ¥
- ì‘ë‹µ í—¤ë”ì— `Set-Cookie`ë¥¼ ì¶”ê°€í•´ ì¿ í‚¤ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥
- ì´í›„ í´ë¼ì´ì–¸íŠ¸ëŠ” ì €ì¥ëœ ì¿ í‚¤ë¥¼ ìš”ì²­ë§ˆë‹¤ í•¨ê»˜ ë³´ë‚´ê²Œ ëŒ
```javascript
const http = require('http'); http.createServer((req, res) => {
  console.log(req.url, req.headers.cookie); //ìš”ì²­ì— í¬í•¨ëœ ì¿ í‚¤ ì¶œë ¥
  res.writeHead(200, { 'Set-Cookie': 'mycookie=test' }); // Set-Cookie ì‘ë‹µ í—¤ë”
  res.end('Hello Cookie'); 
})

  .listen(8083, () â‡’ {
    console.log("8083ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ëŒ€ê¸° ì¤‘ ì…ë‹ˆë‹¤.!");
  });
```
#### `parseCookies` í•¨ìˆ˜


## 1ï¸âƒ£ http ì„œë²„ ì˜ˆì œ
```javascript
const http = require('http');

http.createServer((req, res) => {
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.write('<h1>Hello Node!</h1>');
  res.end('<p>Hello Server!</p>');
})
.listen(8080, () => { 
  console.log('8080ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤!');
});
```


	â€¢	http ëª¨ë“ˆ: ì¼ë°˜ì ì¸ **HTTP ì„œë²„ (80/8080 í¬íŠ¸)**ìš©
	â€¢	http.createServer: ì„œë²„ ìƒì„±
	â€¢	req: ìš”ì²­ ê°ì²´
	â€¢	res: ì‘ë‹µ ê°ì²´
	â€¢	res.writeHead: ì‘ë‹µ í—¤ë” ì„¤ì •
	â€¢	res.write, res.end: ì‘ë‹µ ë³¸ë¬¸ ì‘ì„±
	â€¢	í¬íŠ¸ë²ˆí˜¸: 8080 (ì£¼ë¡œ ê°œë°œìš©)

###  https ì„œë²„ ì˜ˆì œ
```javascript
const https = require('https');
const fs = require('fs');

https.createServer({
  cert: fs.readFileSync('ë„ë©”ì¸ ì¸ì¦ì„œ ê²½ë¡œ'),
  key: fs.readFileSync('ë„ë©”ì¸ ë¹„ë°€í‚¤ ê²½ë¡œ'),
  ca: [
    fs.readFileSync('ìƒìœ„ ì¸ì¦ì„œ ê²½ë¡œ'),
    fs.readFileSync('ìƒìœ„ ì¸ì¦ì„œ ê²½ë¡œ'),
  ],
}, (req, res) => {
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.write('<h1>Hello Node!</h1>');
  res.end('<p>Hello Server!</p>');
})
.listen(443, () => {
  console.log('443ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤!');
});
```
	â€¢	https ëª¨ë“ˆ: **SSL ì¸ì¦ì„œë¥¼ ì‚¬ìš©í•˜ëŠ” ë³´ì•ˆ ì„œë²„ (443 í¬íŠ¸)**ìš©
	â€¢	https.createServer: ë³´ì•ˆ ì„œë²„ ìƒì„±
	â€¢	ì¸ì¦ì„œ ê´€ë ¨ ì„¤ì • í•„ìš”:
	â€¢	cert: ì„œë²„ ì¸ì¦ì„œ íŒŒì¼
	â€¢	key: ì„œë²„ ë¹„ë°€í‚¤ íŒŒì¼
	â€¢	ca: ìƒìœ„ ì¸ì¦ê¸°ê´€ ì²´ì¸ ì¸ì¦ì„œ
	â€¢	í¬íŠ¸ë²ˆí˜¸: 443 (https ê¸°ë³¸ í¬íŠ¸)


### http2 ì„œë²„ ì˜ˆì œ
```javascript
const http2 = require('http2');
const fs = require('fs');

http2.createSecureServer({
  cert: fs.readFileSync('ë„ë©”ì¸ ì¸ì¦ì„œ ê²½ë¡œ'),
  key: fs.readFileSync('ë„ë©”ì¸ ë¹„ë°€í‚¤ ê²½ë¡œ'),
  ca: [
    fs.readFileSync('ìƒìœ„ ì¸ì¦ì„œ ê²½ë¡œ'),
    fs.readFileSync('ìƒìœ„ ì¸ì¦ì„œ ê²½ë¡œ'),
  ],
}, (req, res) => {
  res.writeHead(200, { 'Content-Type': 'text/html; charset=utf-8' });
  res.write('<h1>Hello Node!</h1>');
  res.end('<p>Hello Server!</p>');
})
.listen(443, () => {
  console.log('443ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ ëŒ€ê¸° ì¤‘ì…ë‹ˆë‹¤!');
});
```

	â€¢	http2 ëª¨ë“ˆ: ìµœì‹  í”„ë¡œí† ì½œì¸ HTTP/2 ì§€ì› ì„œë²„ (ë¹ ë¥¸ ì†ë„ + ë©€í‹°í”Œë ‰ì‹±)
	â€¢	ì¸ì¦ì„œ ì„¤ì •ì€ httpsì™€ ê±°ì˜ ë™ì¼
	â€¢	í¬íŠ¸ë²ˆí˜¸: 443 (httpsì™€ ê°™ì§€ë§Œ, í”„ë¡œí† ì½œì´ ë‹¤ë¦„)



### HTTP/1.1 íŠ¹ì§•
| í•­ëª© | ì„¤ëª… |
|---|---|
| ìš”ì²­ ì²˜ë¦¬ ë°©ì‹ | **ì§ë ¬ ì²˜ë¦¬ (Sequential Processing)** |
| ìš”ì²­ ê°œìˆ˜ | **í•œ ë²ˆì— í•˜ë‚˜ë§Œ ìš”ì²­ ê°€ëŠ¥** |
| ì—°ê²° ë°©ì‹ | ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ì—°ê²°ì„ ë§ºê±°ë‚˜, `keep-alive`ë¡œ ì¬ì‚¬ìš© |
| ì„±ëŠ¥ | ì—¬ëŸ¬ ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ë³‘ëª© í˜„ìƒ ë°œìƒ ê°€ëŠ¥ (Head-of-line Blocking) |
| í—¤ë” | ìš”ì²­ë§ˆë‹¤ ë™ì¼í•œ í—¤ë” ê³„ì† ì „ì†¡ (ë¹„íš¨ìœ¨ì ) |

---

### HTTP/2 íŠ¹ì§•
| í•­ëª© | ì„¤ëª… |
|---|---|
| ìš”ì²­ ì²˜ë¦¬ ë°©ì‹ | **ë³‘ë ¬ ì²˜ë¦¬ (Multiplexing)** |
| ìš”ì²­ ê°œìˆ˜ | **í•œ ë²ˆì— ì—¬ëŸ¬ ìš”ì²­ ë™ì‹œ ì²˜ë¦¬ ê°€ëŠ¥** |
| ì—°ê²° ë°©ì‹ | í•˜ë‚˜ì˜ ì—°ê²°ë¡œ ì—¬ëŸ¬ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ (Connection Reuse) |
| ì„±ëŠ¥ | ë” ë¹ ë¥¸ ì‘ë‹µê³¼ íš¨ìœ¨ì ì¸ ë¦¬ì†ŒìŠ¤ ì „ì†¡ |
| í—¤ë” | **í—¤ë” ì••ì¶• (HPACK)**ìœ¼ë¡œ ì¤‘ë³µ ì œê±° ë° ì „ì†¡ ìµœì í™” |

---

### í•œëˆˆì— ë¹„êµí‘œ
| êµ¬ë¶„ | HTTP/1.1 | HTTP/2 |
|---|---|---|
| ìš”ì²­ ë°©ì‹ | í•˜ë‚˜ì”© ìˆœì„œëŒ€ë¡œ | ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ ê°€ëŠ¥ |
| ì—°ê²° ì¬ì‚¬ìš© | ê°€ëŠ¥ (keep-alive) | í•˜ë‚˜ì˜ ì—°ê²°ì—ì„œ ì—¬ëŸ¬ ìŠ¤íŠ¸ë¦¼ ë™ì‹œ ì²˜ë¦¬ |
| ì„±ëŠ¥ | ë³‘ëª© ë°œìƒ ê°€ëŠ¥ | í›¨ì”¬ ë¹ ë¥´ê³  íš¨ìœ¨ì  |
| í—¤ë” ê´€ë¦¬ | ìš”ì²­ë§ˆë‹¤ ì¤‘ë³µ ì „ì†¡ | HPACKìœ¼ë¡œ í—¤ë” ì••ì¶• |
| ì§€ì› í˜„í™© | í˜„ì¬ë„ ë§ì´ ì‚¬ìš© | ìµœì‹  ì„œë¹„ìŠ¤ë“¤ì€ ì ê·¹ ì‚¬ìš© ì¤‘ |

---

### Node.jsì™€ HTTP/2
- Node.jsì—ì„œëŠ” `http2` ëª¨ë“ˆì´ HTTP/2ë¥¼ ì§€ì›
- ê¸°ì¡´ `https`ëŠ” HTTP/1.1 ê¸°ë°˜ ë³´ì•ˆ ì„œë²„
- `http2`ëŠ” **SSL í•„ìˆ˜ + ìµœì‹  í”„ë¡œí† ì½œ ì ìš©**ì´ë¼ëŠ” ì°¨ì´ì 

---

### ìš”ì  ì •ë¦¬
| í”„ë¡œí† ì½œ | ì„¤ëª… |
|---|---|
| `http` | ì•”í˜¸í™” ì—†ëŠ” ì¼ë°˜ ì„œë²„ (HTTP/1.1) |
| `https` | ì•”í˜¸í™”ëœ ë³´ì•ˆ ì„œë²„ (HTTP/1.1) |
| `http2` | ì•”í˜¸í™” + ë³‘ë ¬ ì²˜ë¦¬ë˜ëŠ” ìµœì‹  HTTP/2 ì„œë²„ |

---

### ë¹„ìœ ë¡œ ì´í•´í•˜ê¸°
| êµ¬ë¶„ | ë¹„ìœ  |
|---|---|
| HTTP/1.1 | í¸ì˜ì ì—ì„œ ë¬¼ê±´ í•˜ë‚˜ì”© ë”°ë¡œ ê³„ì‚° |
| HTTP/2 | ì¥ë°”êµ¬ë‹ˆì— ë¬¼ê±´ í•œêº¼ë²ˆì— ë‹´ê³  ê³„ì‚° (ë³‘ë ¬ ì²˜ë¦¬) |

---

### í•µì‹¬ ìš”ì•½
**HTTP/2ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì„ ë” íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ì—¬, ê¸°ì¡´ HTTP/1.1ë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ê³  ìµœì í™”ëœ ìµœì‹  í”„ë¡œí† ì½œì´ë‹¤. Node.jsì—ì„œëŠ” `http2` ëª¨ë“ˆë¡œ ì‰½ê²Œ êµ¬í˜„ ê°€ëŠ¥í•˜ë©°, SSLì€ í•„ìˆ˜ì´ë‹¤.**



#### cluster
- ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€ í”„ë¡œì„¸ìŠ¤ë¡œ ë™ì‘í•˜ëŠ” ë…¸ë“œê°€ CPU ì½”ì–´ë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ëª¨ë“ˆ.
- í¬íŠ¸ë¥¼ ê³µìœ í•˜ëŠ” ë…¸ë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ì—¬ëŸ¬ ê°œ ë‘˜ ìˆ˜ë„ ìˆì–´, ìš”ì²­ì´ ë§ì´ ë“¤ì–´ì™”ì„ ë•Œ ë³‘ë ¬ë¡œ ì‹¤í–‰ëœ ì„œë²„ì˜ ê°œìˆ˜ë§Œí¼ ìš”ì²­ì´ ë¶„ì‚°ë˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

---
### Express ë¯¸ë“¤ì›¨ì–´ & Multer ì •ë¦¬

ì•„ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì™€ Multerì— ëŒ€í•œ ê°œë…ê³¼ ì„¤ëª…ì„
ê¹”ë”í•˜ê²Œ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ì •ë¦¬í•œ ë²„ì „ì´ì•¼.
ë°”ë¡œ ë³µì‚¬í•´ì„œ README.mdë‚˜ ë…¸íŠ¸ ì •ë¦¬í•  ë•Œ ì¨ë„ ë¼.
---

### ë¯¸ë“¤ì›¨ì–´ (Middleware)

#### ë¯¸ë“¤ì›¨ì–´ë€?
- **ìš”ì²­(Request)ê³¼ ì‘ë‹µ(Response) ì‚¬ì´ì—ì„œ ë™ì‘í•˜ëŠ” í•¨ìˆ˜**.
- ìš”ì²­ì„ ê°€ë¡œì±„ í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ê¸°ê±°ë‚˜ ì‘ë‹µì„ ë³´ëƒ„.

---

#### ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ êµ¬ì¡°
```javascript
function middleware(req, res, next) {
    // ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì—ì„œ í•  ì¼ ì²˜ë¦¬
    next(); // ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ë„˜ì–´ê°€ê¸°
}
```

### ë¯¸ë“¤ì›¨ì–´ ì¢…ë¥˜

| ì¢…ë¥˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---|---|---|
| ì „ì—­ ë¯¸ë“¤ì›¨ì–´ | ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰ | `app.use()` |
| ë¼ìš°í„° ë¯¸ë“¤ì›¨ì–´ | íŠ¹ì • ê²½ë¡œì—ì„œë§Œ ì‹¤í–‰ | `app.get('/path', ë¯¸ë“¤ì›¨ì–´)` |
| ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ | ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰ | `app.use((err, req, res, next) => {...})` |


### ğŸ’¡ ì£¼ìš” ë¯¸ë“¤ì›¨ì–´ ì˜ˆì‹œ

| ë¯¸ë“¤ì›¨ì–´ | ì„¤ëª… |
|---|---|
| morgan | ìš”ì²­ ë¡œê·¸ ì¶œë ¥ |
| express.json() | JSON ë³¸ë¬¸ íŒŒì‹± |
| express.urlencoded() | Form ë°ì´í„° íŒŒì‹± |
| cookie-parser | ì¿ í‚¤ íŒŒì‹± |
| express.static() | ì •ì  íŒŒì¼ ì œê³µ |
| multer | íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ |

---

### ë¯¸ë“¤ì›¨ì–´ ì¢…ë¥˜

| ì¢…ë¥˜ | ì„¤ëª… | ì˜ˆì‹œ |
|---|---|---|
| ì „ì—­ ë¯¸ë“¤ì›¨ì–´ | ëª¨ë“  ìš”ì²­ì— ì‹¤í–‰ | `app.use()` |
| ë¼ìš°í„° ë¯¸ë“¤ì›¨ì–´ | íŠ¹ì • ê²½ë¡œì—ì„œë§Œ ì‹¤í–‰ | `app.get('/path', ë¯¸ë“¤ì›¨ì–´)` |
| ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ | ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰ | `app.use((err, req, res, next) => {...})` |

---

### ë¯¸ë“¤ì›¨ì–´ ë™ì‘ íë¦„

ìš”ì²­ â†’ ì „ì—­ ë¯¸ë“¤ì›¨ì–´ â†’ ë¼ìš°í„° ë¯¸ë“¤ì›¨ì–´ â†’ ì‘ë‹µ
â†‘
ì—ëŸ¬ ë°œìƒ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ í˜¸ì¶œ

---

### ì£¼ìš” ë¯¸ë“¤ì›¨ì–´ ì˜ˆì‹œ

| ë¯¸ë“¤ì›¨ì–´ | ì„¤ëª… |
|---|---|
| morgan | ìš”ì²­ ë¡œê·¸ ì¶œë ¥ |
| express.json() | JSON ë³¸ë¬¸ íŒŒì‹± |
| express.urlencoded() | Form ë°ì´í„° íŒŒì‹± |
| cookie-parser | ì¿ í‚¤ íŒŒì‹± |
| express.static() | ì •ì  íŒŒì¼ ì œê³µ |
| multer | íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ |

---

### Multer (íŒŒì¼ ì—…ë¡œë“œ ë¯¸ë“¤ì›¨ì–´)

###  Multerë€?
- Express ì „ìš© íŒŒì¼ ì—…ë¡œë“œ ë¯¸ë“¤ì›¨ì–´
- ìš”ì²­ ë³¸ë¬¸ì— í¬í•¨ëœ íŒŒì¼ ë°ì´í„°ë¥¼ í•´ì„í•˜ê³ , ì§€ì •ëœ ê²½ë¡œì— ì €ì¥


###  ê¸°ë³¸ ì‚¬ìš©ë²•
```javascript
const multer = require('multer');
const upload = multer({ dest: 'uploads/' });

app.post('/upload', upload.single('image'), (req, res) => {
    console.log(req.file); // ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´
    res.send('ì—…ë¡œë“œ ì™„ë£Œ');
});
```

âš™ï¸ ì €ì¥ ë°©ì‹ ì„¤ì • (diskStorage)
	â€¢	íŒŒì¼ëª…, ì €ì¥ í´ë” ì§ì ‘ ì œì–´ ê°€ëŠ¥
```javascript

const storage = multer.diskStorage({
    destination(req, file, cb) {
        cb(null, 'uploads/');
    },
    filename(req, file, cb) {
        const ext = path.extname(file.originalname);
        cb(null, Date.now() + ext); // íŒŒì¼ëª…: í˜„ì¬ì‹œê°„ + í™•ì¥ì
    }
});
const upload = multer({ storage });
```
###  Multer ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… | ì €ì¥ ìœ„ì¹˜ |
|---|---|---|
| single() | í•œ ê°œ íŒŒì¼ ì—…ë¡œë“œ | req.file |
| array() | ì—¬ëŸ¬ ê°œ íŒŒì¼ (ê°™ì€ name) | req.files |
| fields() | ì—¬ëŸ¬ ê°œ íŒŒì¼ (ë‹¤ë¥¸ name) | req.files.í•„ë“œëª… |
| none() | íŒŒì¼ ì—†ì´ ë°ì´í„°ë§Œ ë°›ê¸° | req.body |

---

###  Multer íë¦„ ìš”ì•½

| ë‹¨ê³„ | ì„¤ëª… |
|---|---|
| ìš”ì²­ | í´ë¼ì´ì–¸íŠ¸ê°€ íŒŒì¼ ì—…ë¡œë“œ ìš”ì²­ ì „ì†¡ |
| multer ì²˜ë¦¬ | íŒŒì¼ íŒŒì‹± í›„ ì§€ì • í´ë”ì— ì €ì¥ |
| ë¼ìš°í„° ì²˜ë¦¬ | req.file ë˜ëŠ” req.filesì—ì„œ íŒŒì¼ ì •ë³´ ì‚¬ìš© |

---

###  ì •ë¦¬ ìš”ì 

| êµ¬ë¶„ | ì„¤ëª… |
|---|---|
| ë¯¸ë“¤ì›¨ì–´ | ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì—ì„œ ë™ì‘ |
| multer | íŒŒì¼ ì—…ë¡œë“œ ì „ìš© ë¯¸ë“¤ì›¨ì–´ |
| ì „ì—­ ë¯¸ë“¤ì›¨ì–´ | ëª¨ë“  ìš”ì²­ì—ì„œ ë™ì‘ |
| ë¼ìš°í„° ë¯¸ë“¤ì›¨ì–´ | íŠ¹ì • ê²½ë¡œì—ì„œ ë™ì‘ |
| ì—ëŸ¬ ë¯¸ë“¤ì›¨ì–´ | ì—ëŸ¬ ë°œìƒ ì‹œ ë™ì‘ |

### ê²°ë¡ 
	â€¢	ë¯¸ë“¤ì›¨ì–´ëŠ” ìš”ì²­ê³¼ ì‘ë‹µ íë¦„ì„ ì œì–´í•˜ëŠ” í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ
	â€¢	MulterëŠ” íŒŒì¼ ì—…ë¡œë“œë¥¼ ë‹¤ë£° ë•Œ í•„ìˆ˜ ë¯¸ë“¤ì›¨ì–´
	â€¢	íŒŒì¼ ì €ì¥ ë°©ì‹, ì—…ë¡œë“œ ìš©ëŸ‰ ì œí•œ, ì—…ë¡œë“œ í•„ë“œëª… ë“±ì„ ëª¨ë‘ ì»¤ìŠ¤í„°ë§ˆì´ì§• ê°€ëŠ¥

```javascript
const dotenv = require('dotenv');  // í™˜ê²½ë³€ìˆ˜ íŒŒì¼(.env)ì„ ë¡œë“œí•˜ëŠ” ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
dotenv.config();                    // .env íŒŒì¼ ì½ì–´ì„œ process.envì— ë„£ê¸°

const express = require('express');  // ìµìŠ¤í”„ë ˆìŠ¤ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const path = require('path');        // ê²½ë¡œ ê´€ë ¨ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const morgan = require('morgan');    // ìš”ì²­ ë¡œê·¸ ë‚¨ê¸°ëŠ” ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const cookieParser = require('cookie-parser');  // ì¿ í‚¤ íŒŒì‹± ë¯¸ë“¤ì›¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
const session = require('express-session');     // ì„¸ì…˜ ê´€ë¦¬ ë¯¸ë“¤ì›¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
const multer = require('multer');    // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
const fs = require('fs');            // íŒŒì¼ì‹œìŠ¤í…œ ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const { v4: uuidv4 } = require('uuid');  // uuid ëª¨ë“ˆì—ì„œ v4 ë©”ì„œë“œ ë¶ˆëŸ¬ì˜¤ê¸° (íŒŒì¼ëª… ëœë¤í™”ì— ì‚¬ìš©)

const app = express();  // ìµìŠ¤í”„ë ˆìŠ¤ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±

app.set('port', process.env.PORT || 3000);  // ì‚¬ìš©í•  í¬íŠ¸ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ ì—†ìœ¼ë©´ 3000 ì‚¬ìš©)

const upload = multer({  // multer ì„¤ì • ì‹œì‘
  storage: multer.diskStorage({  // íŒŒì¼ ì €ì¥ ë°©ì‹ ì„¤ì • (ë””ìŠ¤í¬ì— ì €ì¥)
    destination(req, file, done) {  // ì €ì¥ ê²½ë¡œ ì„¤ì •
      const uploadPath = path.join(__dirname, 'uploads');  // í˜„ì¬ í´ë” ë°‘ì— uploads í´ë” ì§€ì •
      if (!fs.existsSync(uploadPath)) {  // uploads í´ë” ì—†ìœ¼ë©´ ìƒì„±
        fs.mkdirSync(uploadPath);
      }
      done(null, uploadPath);  // ì‹¤ì œ ì €ì¥ ê²½ë¡œ ì§€ì •
    },
    filename(req, file, done) {  // ì €ì¥í•  íŒŒì¼ëª… ì„¤ì •
      const ext = path.extname(file.originalname);  // ì›ë³¸ íŒŒì¼ì˜ í™•ì¥ì ì¶”ì¶œ
      done(null, `${uuidv4()}${ext}`);  // íŒŒì¼ëª…ì€ ëœë¤ UUID + ì›ë˜ í™•ì¥ì
    },
  }),
  limits: { fileSize: 10 * 1024 * 1024 },  // íŒŒì¼ í¬ê¸° ì œí•œ (10MB)
});

// ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
app.use(morgan('dev'));  // ìš”ì²­ ë¡œê·¸ ì¶œë ¥ (ê°œë°œìš© ì„¤ì •)
app.use('/', express.static(path.join(__dirname, 'public')));  // ì •ì  íŒŒì¼ ì œê³µ(public í´ë”)
app.use(express.json());  // ìš”ì²­ ë³¸ë¬¸(json) íŒŒì‹±
app.use(express.urlencoded({ extended: false }));  // ìš”ì²­ ë³¸ë¬¸(form-urlencoded) íŒŒì‹±
app.use(cookieParser(process.env.COOKIE_SECRET));  // ì¿ í‚¤ íŒŒì‹± ë° ì„œëª… ì²˜ë¦¬
app.use(session({  // ì„¸ì…˜ ì„¤ì •
  resave: false,  // ìš”ì²­ì´ ì™”ì„ ë•Œ ì„¸ì…˜ì— ìˆ˜ì •ì‚¬í•­ì´ ì—†ì–´ë„ ë‹¤ì‹œ ì €ì¥í• ì§€ ì—¬ë¶€
  saveUninitialized: false,  // ì„¸ì…˜ì´ í•„ìš”í•˜ê¸° ì „ê¹Œì§€ëŠ” ì„¸ì…˜ì„ êµ¬ë™í•˜ì§€ ì•ŠìŒ
  secret: process.env.COOKIE_SECRET,  // ì¿ í‚¤ ì•”í˜¸í™” í‚¤ (envì—ì„œ ë¶ˆëŸ¬ì˜´)
  cookie: { 
    httpOnly: true,  // ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì¿ í‚¤ ì ‘ê·¼ ê¸ˆì§€
    secure: false,   // httpsê°€ ì•„ë‹Œ í™˜ê²½ì—ì„œë„ ì‚¬ìš©
  },
  name: 'session-cookie',  // ì„¸ì…˜ ì¿ í‚¤ ì´ë¦„ ì§€ì •
}));

// ì—…ë¡œë“œ í™”ë©´ ë¼ìš°í„°
app.get('/upload', (req, res) => {
  res.sendFile(path.join(__dirname, 'multipart.html'));  // íŒŒì¼ ì—…ë¡œë“œ í¼ ì œê³µ
});

// íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ë¼ìš°í„°
app.post('/upload', upload.fields([
  { name: 'image1', maxCount: 1 },  // image1ì€ 1ê°œë§Œ
  { name: 'image2', maxCount: 1 },  // image2ë„ 1ê°œë§Œ
]), (req, res) => {
  console.log(req.files.image1);  // ì—…ë¡œë“œëœ image1 íŒŒì¼ ì •ë³´ ì¶œë ¥
  console.log(req.files.image2);  // ì—…ë¡œë“œëœ image2 íŒŒì¼ ì •ë³´ ì¶œë ¥
  console.log(req.body.title);    // í•¨ê»˜ ì „ì†¡ëœ ì œëª© ë°ì´í„° ì¶œë ¥
  res.send('ok');  // ì—…ë¡œë“œ ì™„ë£Œ ì‘ë‹µ
});

// ëª¨ë“  ìš”ì²­ì—ì„œ ì‹¤í–‰ë˜ëŠ” ê³µí†µ ë¯¸ë“¤ì›¨ì–´
app.use((req, res, next) => {
  console.log('ëª¨ë“  ìš”ì²­ì— ë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.');  // ëª¨ë“  ìš”ì²­ë§ˆë‹¤ ë¡œê·¸ ì¶œë ¥
  next();  // ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ë¡œ ì´ë™
});

// ë©”ì¸ í˜ì´ì§€ ìš”ì²­ ì²˜ë¦¬ ë¼ìš°í„°
app.get('/', (req, res) => {
  console.log('GET / ìš”ì²­ì—ì„œë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.');  // ë¡œê·¸ ì¶œë ¥
  res.sendFile(path.join(__dirname, 'index.html'));  // ë©”ì¸ í˜ì´ì§€ íŒŒì¼ ì œê³µ
});

// ì—ëŸ¬ ì²˜ë¦¬ ë¯¸ë“¤ì›¨ì–´
app.use((err, req, res, next) => {
  console.error(err);  // ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
  res.status(500).send(err.message);  // 500 ì—ëŸ¬ ì‘ë‹µ
});

// ì„œë²„ ì‹¤í–‰
app.listen(app.get('port'), () => {
  console.log(app.get('port'), 'ë²ˆ í¬íŠ¸ì—ì„œ ëŒ€ê¸° ì¤‘');  // ì„œë²„ ì‹œì‘ ë¡œê·¸
});
```
---

## Router ê°ì²´ë¡œ ë¼ìš°íŒ… ë¶„ë¦¬í•˜ê¸°


---









